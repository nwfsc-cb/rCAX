<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Return fish HLI tables from Coordinated Assessments data eXchange — rcax_hli • rCAX</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Return fish HLI tables from Coordinated Assessments data eXchange — rcax_hli"><meta property="og:description" content='Returns the HLI table with some additional metadata, such as NMFS_PopID and update dates,
in the default tabletype="xport case.
This is the table that one can download from the
CAP Fish HLIs Tabular Query. The HLI is specified using its short code:
NOSA: Natural Origin Spawner Abundance
SAR: Smolt to Adult Ratios
PNI: Proportionate Natural Influence of supplementation hatcheries
RperS: Recruits per Spawner
JuvOut: Juvenile Outmigrants
PreSmolt: Presmolt Abundance


The query will download 1000 records by default; you can change
this by passing in qlist=list(limit=1100) for example. To make a
filtered query e.g. for one ESU or popid) pass in the flist
argument. Field names and values are case insensitive, e.g.
POPID, popid and PopID return the same result.
If your filter value is not in the table, the returned table
will be empty. Examples:
flist=list(popid=7) return values for popid 7.
flist=list(nmfs_popid=6) return values for NMFS_PopID 6.
flist=list(esu_dps="Salmon, Chinook (Snake River spring/summer-run ESU)") return values for one ESU. Use rCAX:::caxesu to see a list of ESU_DPS names.

'><meta property="og:image" content="https://nwfsc-cb.github.io/rCAX/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rCAX</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="far fa-file-code fa-lg"></span>
     
    Functions
  </a>
</li>
<li>
  <a href="https://github.com/nwfsc-cb/rCAX" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
    Source Code
  </a>
</li>
<li>
  <a href="https://github.com/nwfsc-cb/rCAX/issues/" class="external-link">
    <span class="fas fa-question-circle fa-lg"></span>
     
    Issues
  </a>
</li>
<li>
  <a href="../articles/index.html">
    <span class="fas fa-file-contract fa-lg"></span>
     
    Vignettes
  </a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/nwfsc-cb/rCAX/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Return fish HLI tables from Coordinated Assessments data eXchange</h1>
    <small class="dont-index">Source: <a href="https://github.com/nwfsc-cb/rCAX/blob/HEAD/R/rcax_hli.R" class="external-link"><code>R/rcax_hli.R</code></a></small>
    <div class="hidden name"><code>rcax_hli.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Returns the HLI table with some additional metadata, such as NMFS_PopID and update dates,
in the default <code>tabletype="xport</code> case.
This is the table that one can download from the
<a href="https://www.streamnet.org/data/hli/" class="external-link">CAP Fish HLIs Tabular Query</a>. The HLI is specified using its short code:</p><ul><li><p>NOSA: Natural Origin Spawner Abundance</p></li>
<li><p>SAR: Smolt to Adult Ratios</p></li>
<li><p>PNI: Proportionate Natural Influence of supplementation hatcheries</p></li>
<li><p>RperS: Recruits per Spawner</p></li>
<li><p>JuvOut: Juvenile Outmigrants</p></li>
<li><p>PreSmolt: Presmolt Abundance</p></li>
</ul><p>The query will download 1000 records by default; you can change
this by passing in <code>qlist=list(limit=1100)</code> for example. To make a
filtered query e.g. for one ESU or popid) pass in the <code>flist</code>
argument. Field names and values are case insensitive, e.g.
<code>POPID</code>, <code>popid</code> and <code>PopID</code> return the same result.
If your filter value is not in the table, the returned table
will be empty. Examples:</p><ul><li><p><code>flist=list(popid=7)</code> return values for popid 7.</p></li>
<li><p><code>flist=list(nmfs_popid=6)</code> return values for NMFS_PopID 6.</p></li>
<li><p><code>flist=list(esu_dps="Salmon, Chinook (Snake River spring/summer-run ESU)")</code> return values for one ESU. Use <code>rCAX:::caxesu</code> to see a list of ESU_DPS names.</p></li>
</ul></div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">rcax_hli</span><span class="op">(</span></span>
<span>  hli <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NOSA"</span>, <span class="st">"SAR"</span>, <span class="st">"PNI"</span>, <span class="st">"PreSmolt"</span>, <span class="st">"JuvOut"</span>, <span class="st">"RperS"</span><span class="op">)</span>,</span>
<span>  flist <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  qlist <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sortcols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"data.frame"</span>, <span class="st">"colnames"</span><span class="op">)</span>,</span>
<span>  tabletype <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"xport"</span>, <span class="st">"base"</span><span class="op">)</span>,</span>
<span>  GETargs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>table_id <span class="op">=</span> <span class="cn">NULL</span>, recordloc <span class="op">=</span> <span class="st">"records"</span>, key <span class="op">=</span> <span class="cn">NULL</span>, parse <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>hli</dt>
<dd><p>The HLI short name: NOSA, SAR, PNI, PreSmolt, JuvOut, RperS</p></dd>


<dt>flist</dt>
<dd><p>A filter for the query. See details and <code><a href="rcax_filter.html">rcax_filter()</a></code></p></dd>


<dt>qlist</dt>
<dd><p>Additional query parameters. See <code><a href="rcax_table_query.html">rcax_table_query()</a></code> for details.</p></dd>


<dt>cols</dt>
<dd><p>column names to return. Use cols=NULL if you want all columns. Names are case insensitive.</p></dd>


<dt>sortcols</dt>
<dd><p>The columns to sort on for the returned table. The order of sortcols indicates the order of sorting. Start with the smallest group and work outwards, e.g. <code>c("spawningyear", "popid", "MPG")</code>. Names are case insensitive.</p></dd>


<dt>type</dt>
<dd><p>whether to return the table ("data.frame") or colnames with definitions ("colnames"). Default is to return the table as a data frame.</p></dd>


<dt>tabletype</dt>
<dd><p>"xport" (default) or "base". XPort has additional useful metadata.</p></dd>


<dt>GETargs</dt>
<dd><p>A list of arguments for the <code><a href="rcax_GET.html">rcax_GET()</a></code> call. These do not need to be specified by the user unless the user wants to change the default values. <code>table_id</code> This is the CAX table id. It is looked up using <code>tablename</code> and <code>rCAX:::caxpops</code> (an internal dataset). If <code>table_id</code> is passed in via <code>GETargs</code>, it will override the default table id lookup. <code>recordloc</code> This is the name of the record we want in the list returned from the GET call. <code>key</code> is the API key.</p></dd>


<dt>...</dt>
<dd><p>Curl options passed to <code><a href="https://docs.ropensci.org/crul/reference/HttpClient.html" class="external-link">HttpClient</a></code></p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>data frame if <code>type="data.frame"</code> (default) and the colnames if <code>type="colnames"</code></p>


    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The XPort tables have a few columns that do not appear in the
Excel files that
one can download from StreamNet:
"species", "publish", "num", "hli", "agency", "esudps", "hli_id".
"esudps" is a slight variant on
"esu_dps" and is removed. "num" is a sort flag and is removed. "hli_id"
is an internal reference id and is removed.
"publish" will always be Yes but is left in. The other columns are
left in. The colnames are re-sorted into the order found in the
downloaded
Excel files with the extra columns added to the end.</p>
<p>The table columns are sorted into the order that appears in
<a href="https://www.streamnet.org/data/hli/" class="external-link">CAP Fish HLIs Tabular Query</a>.
If you want to see the original columns in the original order,
use <code>cols=1:50</code>, say, to see the first 50 columns in the original
order.</p>
<p>If <code>tabletype="base"</code> is used, the base tables without the added metadata are
returned. The data are the same just missing the extra metadata.</p>
<p>If you want to see only the column names use <code>type="colnames</code>.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="rcax_table_query.html">rcax_table_query()</a></code>, <code><a href="rcax_filter.html">rcax_filter()</a></code>, <code><a href="rcax_table_name.html">rcax_table_name()</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># return NMFS_PopID of second record</span></span></span>
<span class="r-in"><span><span class="co"># Note the part after $ is case sensitive</span></span></span>
<span class="r-in"><span><span class="va">id</span> <span class="op">&lt;-</span> <span class="fu">rcax_hli</span><span class="op">(</span><span class="st">"NOSA"</span>, qlist<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>limit<span class="op">=</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">nmfs_popid</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">rcax_hli</span><span class="op">(</span><span class="st">"NOSA"</span>,</span></span>
<span class="r-in"><span>         flist<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>nmfs_popid<span class="op">=</span><span class="va">id</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>         cols<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"nmfs_popid"</span>, <span class="st">"spawningyear"</span>, <span class="st">"tsaej"</span>, <span class="st">"nosaej"</span><span class="op">)</span></span></span>
<span class="r-in"><span>         <span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   nmfs_popid spawningyear tsaej nosaej</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        185         1990   434     19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2        185         1991    39      5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3        185         1992   143     11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4        185         1993   364     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5        185         1994  1554     91</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6        185         1995  1325    105</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># First 3 columns</span></span></span>
<span class="r-in"><span><span class="fu">rcax_hli</span><span class="op">(</span><span class="st">"NOSA"</span>, qlist<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>limit<span class="op">=</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       commonname    run    recoverydomain</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Chinook salmon Spring Interior Columbia</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      Steelhead Summer Interior Columbia</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    Coho salmon   Fall      Oregon Coast</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># to print the first column names and definitions</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">rcax_hli</span><span class="op">(</span><span class="st">"NOSA"</span>, type<span class="op">=</span><span class="st">"colnames"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                        name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 107               age10prop</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41      age10proplowerlimit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24      age10propupperlimit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 108           age11plusprop</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 109 age11plusproplowerlimit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 62  age11pluspropupperlimit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                            definition</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 107          The proportion of natural origin fish that were age 10 (brood year +10).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41                              Lower limit of the confidence interval for Age10Prop.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24                              Upper limit of the confidence interval for Age10Prop.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 108 The proportion of natural origin fish that were age 11 (brood year +11) or older.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 109                         Lower limit of the confidence interval for Age11PlusProp.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 62                          Upper limit of the confidence interval for Age11PlusProp.</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>NWFSC Math Bio Data and Metrics team: <a href="https://github.com/eeholmes" class="external-link">Eli Holmes</a>, <a href="https://github.com/mari-williams" class="external-link">Mari Williams</a>, <a href="https://github.com/katiebarnas" class="external-link">Katie Barnas</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

