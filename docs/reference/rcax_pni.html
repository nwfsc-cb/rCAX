<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Return PNI base table — rcax_pni • rCAX</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Return PNI base table — rcax_pni"><meta property="og:description" content='Returns the base HLI table which is missing the
additional metadata (such as NMFS_PopID and update dates) found in the XPort tables.
The query will download 1000 records by default; you can change
this by passing in qlist=list(limit=1100) for example. To make a
filtered query e.g. for one ESU or popid) pass in the flist
argument. Field names and values are case insensitive, e.g.
POPID, popid and PopID return the same result.
If your filter value is not in the table, the returned table
will be empty. Examples:
flist=list(popid=7) return values for popid 7.
flist=list(esu_dps="Salmon, Chinook (Snake River spring/summer-run ESU)") return values for one ESU. Use rCAX:::caxesu to see a list of ESU_DPS names.

'><meta property="og:image" content="https://nwfsc-math-bio.github.io/rCAX/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rCAX</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.6.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="far fa-file-code fa-lg"></span>
     
    Functions
  </a>
</li>
<li>
  <a href="https://github.com/nwfsc-math-bio/rCAX" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
    Source Code
  </a>
</li>
<li>
  <a href="https://github.com/nwfsc-math-bio/rCAX/issues/" class="external-link">
    <span class="fas fa-question-circle fa-lg"></span>
     
    Issues
  </a>
</li>
<li>
  <a href="../articles/index.html">
    <span class="fas fa-file-contract fa-lg"></span>
     
    Vignettes
  </a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/nwfsc-math-bio/rCAX/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Return PNI base table</h1>
    <small class="dont-index">Source: <a href="https://github.com/nwfsc-math-bio/rCAX/blob/HEAD/R/rcax_pni.R" class="external-link"><code>R/rcax_pni.R</code></a></small>
    <div class="hidden name"><code>rcax_pni.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Returns the base HLI table which is missing the
additional metadata (such as NMFS_PopID and update dates) found in the XPort tables.</p>
<p>The query will download 1000 records by default; you can change
this by passing in <code>qlist=list(limit=1100)</code> for example. To make a
filtered query e.g. for one ESU or popid) pass in the <code>flist</code>
argument. Field names and values are case insensitive, e.g.
<code>POPID</code>, <code>popid</code> and <code>PopID</code> return the same result.
If your filter value is not in the table, the returned table
will be empty. Examples:</p><ul><li><p><code>flist=list(popid=7)</code> return values for popid 7.</p></li>
<li><p><code>flist=list(esu_dps="Salmon, Chinook (Snake River spring/summer-run ESU)")</code> return values for one ESU. Use <code>rCAX:::caxesu</code> to see a list of ESU_DPS names.</p></li>
</ul></div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">rcax_pni</span><span class="op">(</span></span>
<span>  tablename <span class="op">=</span> <span class="st">"PNI"</span>,</span>
<span>  flist <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  qlist <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sortcols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"spawningyear"</span>, <span class="st">"popid"</span><span class="op">)</span>,</span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"data.frame"</span>, <span class="st">"colnames"</span><span class="op">)</span>,</span>
<span>  GETargs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>table_id <span class="op">=</span> <span class="cn">NULL</span>, recordloc <span class="op">=</span> <span class="st">"records"</span>, key <span class="op">=</span> <span class="cn">NULL</span>, parse <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>tablename</dt>
<dd><p>(character) The CAX name for the table; ignored if <code>GETargs$table_id</code> passed in.</p></dd>


<dt>flist</dt>
<dd><p>A filter for the query. See details and <code><a href="rcax_filter.html">rcax_filter()</a></code></p></dd>


<dt>qlist</dt>
<dd><p>Additional query params. See <code><a href="rcax_table_query.html">rcax_table_query()</a></code> for details.</p></dd>


<dt>cols</dt>
<dd><p>column names to return. Use cols=NULL if you want all columns</p></dd>


<dt>sortcols</dt>
<dd><p>The columns to sort on for the returned table. The order of sortcols indicates the order of sorting. Start with the smallest group and work outwards, e.g. <code>c("spawningyear", "popid", "MPG")</code></p></dd>


<dt>type</dt>
<dd><p>whether to return the table ("data.frame") or colnames with definitions ("colnames"). Default is to return the table as a data frame.</p></dd>


<dt>GETargs</dt>
<dd><p>A list of arguments for the <code><a href="rcax_GET.html">rcax_GET()</a></code> call. These do not normally need to be specified by the user. <code>table_id</code> This is the CAX table id. It is looked up using <code>tablename</code> and <code>rCAX:::caxpops</code> (an internal dataset). <code>recordloc</code> This is the name of the record we want in the list returned from the GET call. <code>key</code> is the API key. See <code><a href="../articles/setup.html">vignette("setup", package = "rCAX")</a></code> for API key details.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>data frame if <code>type="data.frame"</code> (default) and the colnames if <code>type="colnames"</code></p>


    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The table_id is set automatically using a saved data frame from a <code><a href="rcax_tables.html">rcax_tables()</a></code> call. The table is saved in <code>R/sysdata.rda</code>.</p>
<p>If you want to see only the column names use
<code>type="colnames</code>.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>API docs at <a href="https://www.streamnet.org/resources/exchange-tools/rest-api-documentation/" class="external-link">https://www.streamnet.org/resources/exchange-tools/rest-api-documentation/</a></p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="rcax_pni_xport.html">rcax_pni_xport()</a></code>, <code><a href="rcax_table_query.html">rcax_table_query()</a></code>, <code><a href="rcax_filter.html">rcax_filter()</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># return popid of first record</span></span></span>
<span class="r-in"><span><span class="co"># Note the part after $ is case sensitive</span></span></span>
<span class="r-in"><span><span class="va">id</span> <span class="op">&lt;-</span> <span class="fu">rcax_pni</span><span class="op">(</span>qlist<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>limit<span class="op">=</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">popid</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Return the table for this id</span></span></span>
<span class="r-in"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">rcax_pni</span><span class="op">(</span></span></span>
<span class="r-in"><span>         flist<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>popid<span class="op">=</span><span class="va">id</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>         cols<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"popid"</span>, <span class="st">"spawningyear"</span>, <span class="st">"pniej"</span><span class="op">)</span></span></span>
<span class="r-in"><span>         <span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   popid spawningyear pniej</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    15         1985  1.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    15         1986  1.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    15         1987  1.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    15         1988  1.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    15         1989  0.98</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    15         1990  0.69</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># First 3 columns</span></span></span>
<span class="r-in"><span><span class="fu">rcax_pni</span><span class="op">(</span>qlist<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>limit<span class="op">=</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   popid                                            metriclocation</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    15                                                          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    47                                                          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   512 https://docs.cbfwl.org/StreamNet_References/WAsn17274.pdf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                      popfitnotes</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                                                               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Nason Creek Spring Chinook Portion of Wenatchee Spring Chinook</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                                               Whole population</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># to print the first column names and definitions</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">rcax_pni</span><span class="op">(</span>type<span class="op">=</span><span class="st">"colnames"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          popid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 metriclocation</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    popfitnotes</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     datastatus</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   cbfwapopname</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   methodnumber</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                                           definition</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                                                         StreamNet code for the population of fish.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                                          Where this supporting metric is maintained at the source.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                      Text description of why the data are not at the scale of a single population.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                                                                   "Draft", "Reviewed", or "Final".</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                                            Population name defined by CBFWA for subbasin planning.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 When an organization provides &gt; 1 estimate per year, this number identifies which method was used.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># to print the first 5 column names as they appear</span></span></span>
<span class="r-in"><span><span class="co"># in Excel files downloaded from https://www.streamnet.org/data/hli/</span></span></span>
<span class="r-in"><span><span class="va">tab</span> <span class="op">&lt;-</span> <span class="fu">rcax_pni</span><span class="op">(</span>qlist<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>limit<span class="op">=</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">tab</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "popid"          "metriclocation" "popfitnotes"    "datastatus"    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "cbfwapopname"  </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>NWFSC Math Bio Data and Metrics team: <a href="https://github.com/eeholmes" class="external-link">Eli Holmes</a>, <a href="https://github.com/mari-williams" class="external-link">Mari Williams</a>, <a href="https://github.com/katiebarnas" class="external-link">Katie Barnas</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

